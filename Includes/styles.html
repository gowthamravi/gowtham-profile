<style>
<!--    .bg-image {-->
<!--        background-image: url('/images/bg.jpg');-->
<!--        background-size: cover;-->
<!--        background-position: center;-->
<!--        background-repeat: no-repeat;-->
<!--        background-attachment: fixed;-->
<!--        width: 100%;-->
<!--        height: 100vh;-->
<!--        z-index: 1;-->
<!--    }-->
<!--    .overlay-image {-->
<!--        background-image: url('/images/overlay.png');-->
<!--        background-size: cover;-->
<!--        background-position: center;-->
<!--        background-repeat: no-repeat;-->
<!--        background-attachment: fixed;-->
<!--        width: 100%;-->
<!--        height: 100vh;-->
<!--        z-index: 2;-->
<!--    }-->
<!--    -->
    /* Basic setup for the background container */
    .bg {
        transform: scale(1.0);
        backface-visibility: hidden; /* Removed vendor prefixes for modern browsers */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        z-index: -1;
    }

    /* Styling the before pseudo-element for overlay effects */
    .bg:before {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        transition: background-color 2.5s ease-in-out 0.75s; /* Modern shorthand syntax for delay and transition */
        background-image: linear-gradient(to top, rgba(19, 21, 25, 0.5), rgba(19, 21, 25, 0.5)), url("/images/ovrlay.png");
        background-size: auto, 256px 256px; /* Scales the overlay image */
        background-position: center, center;
        background-repeat: no-repeat, repeat;
        z-index: -1; /* Ensures it's above the background */
    }

    /* Styling the after pseudo-element for the background image */
    .bg:after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        transform: scale(1.125); /* Initial scale */
        transition: transform 0.325s ease-in-out, filter 0.325s ease-in-out; /* Simplified transition */
        background-image: url("/images/bg.jpg");
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;
        z-index: -2; /* Ensures it's beneath the overlay */
    }

    /* When the article is visible, slightly scale down the background and apply blur */
    body.is-article-visible #bg:after {
        transform: scale(1.0825);
        filter: blur(0.2rem); /* Applies a slight blur */
    }

    /* Preload state, where the overlay starts with a black background */
    body.is-preload #bg:before {
        background-color: #000;
    }

</style>
